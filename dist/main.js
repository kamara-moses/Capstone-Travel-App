var Client=function(e){var t={};function n(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(a,i,function(t){return e[t]}.bind(null,i));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t),n.d(t,"handleSubmit",(function(){return a})),n.d(t,"updateUI",(function(){return i}));const a=async e=>{e.preventDefault();let t=document.getElementById("city").value,n=document.getElementById("start").value,a=document.getElementById("end").value,i=new Date,o=new Date(n),d=new Date(a),r=o.getTime()-i.getTime(),c={startDate:n,endDate:a,diffInDays:Math.round(r/864e5)};if(""===t)return void alert("Please enter a city name.");if(o<i||d<o)return void alert("Invalid date: either you select past date as start date or set end date earlier than start date.");console.log("::: Form Submitted :::");let s={},l={},m={};console.log("Fetching data from geonames:",{city:t});const p=await fetch("http://localhost:8081/city",{method:"POST",credentials:"same-origin",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({city:t})});try{const e=await p.json();s={city:e.geonames[0].name,country:e.geonames[0].countryName,lat:e.geonames[0].lat,lon:e.geonames[0].lng},console.log("Data received from geonames:",s)}catch(e){console.log("error",e)}console.log("Fetching data from weatherbit:",{cityLatLon:s});const u=await fetch("http://localhost:8081/weather",{method:"POST",credentials:"same-origin",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});try{l=await u.json(),console.log("Data received from weatherbit:",l)}catch(e){console.log("error",e)}console.log("Fetching a pic from pixabay:",{cityLatLon:s});const v=await fetch("http://localhost:8081/pic",{method:"POST",credentials:"same-origin",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});try{m=await v.json(),console.log("Data received from pixabay:",m)}catch(e){console.log("error",e)}const f=document.querySelector("main"),y=document.createElement("section");y.setAttribute("class","card"),y.innerHTML=Client.updateUI(c,m,s,l),f.appendChild(y)};function i(e,t,n,a){return`\n            <div class="card__image">\n                <img src="${t.hits[0].webformatURL}" alt="">\n            </div>\n            <div class="card__body">\n                <div class="card__text">\n                    <p>Your Trip To:</p>\n                    <h3>${n.city}, ${n.country}</h3>\n                    <br>\n                    <p>Your trip is in ${e.diffInDays} days</p>\n                    <br>\n                    <p>Dates:</p>\n                    <h4>${e.startDate} To ${e.endDate}</h4>\n                </div>\n            </div>\n            <div class="card__weather">\n                <div id="card__weather--title">\n                    <p>3-Day Weather Forecast:</p>\n                </div>\n                <div class="card__weather--icon">\n                    <div id="date">${a.data[0].datetime}</div>\n                    <div id="icon"><img src="../media/${a.data[0].weather.icon}.png" alt="${a.data[0].weather.description}"></div>\n                    <div id="temp">H:${a.data[0].max_temp}° | L:${a.data[0].min_temp}°</div>\n                    <div id="pop">${a.data[0].pop}%</div>\n                </div>\n                <div class="card__weather--icon">\n                    <div id="date">${a.data[1].datetime}</div>\n                    <div id="icon"><img src="../media/${a.data[1].weather.icon}.png" alt="${a.data[1].weather.description}"></div>\n                    <div id="temp">H:${a.data[1].max_temp}° | L:${a.data[1].min_temp}°</div>\n                    <div id="pop">${a.data[1].pop}%</div>\n                </div>\n                <div class="card__weather--icon">\n                    <div id="date">${a.data[2].datetime}</div>\n                    <div id="icon"><img src="../media/${a.data[2].weather.icon}.png" alt="${a.data[2].weather.description}"></div>\n                    <div id="temp">H:${a.data[2].max_temp}° | L:${a.data[2].min_temp}°</div>\n                    <div id="pop">${a.data[2].pop}%</div>\n                </div>\n            </div>`}n(0),n(1),n(2),n(3);document.getElementById("submit").addEventListener("click",a)}]);